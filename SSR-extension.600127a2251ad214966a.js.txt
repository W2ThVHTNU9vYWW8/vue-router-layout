!function(){"use strict";!function(){if("undefined"!=typeof __webpack_require__){const e=__webpack_require__.e,t={};__webpack_require__.e=function(n){return e(n).catch((function(e){const i=t.hasOwnProperty(n)?t[n]:2;if(i<1)throw e;return new Promise((function(e){setTimeout((function(){t[n]=i-1,e(__webpack_require__.e(n))}),100)}))}))}}}();class e{constructor(e){this.searchParams=Object.create(null),this.parseQueryString(e)}set(e,t){return null!=t&&(this.searchParams[e]=t),this}get(e){return this.searchParams[e]}delete(e){delete this.searchParams[e]}toString(){const e=Object.keys(this.searchParams);return e.length?e.sort().map((e=>`${e}=${this.searchParams[e]}`)).join("&"):""}parseQueryString(e){if(!e)return;const t=e.indexOf("?");t>-1&&(e=e.substring(t+1)),e.split("&").forEach((e=>{const t=e.split("="),n=t[0];this.get(n)||(this.searchParams[n]=t[1])}))}}var t;!function(e){e.JSON="application/json;charset=UTF-8",e.HTML="text/html;charset=UTF-8"}(t=t||(t={}));const n="ssrOnly";function i(){const e=performance.getEntriesByType("navigation")[0].serverTiming;if(e){const t=e.find((e=>"rsClusterName"===e.name));if(t)return t.description}}function o(e,t){return t.get(e)||t.get(e.toLowerCase())}function r(t){return n=t&&t.queryparams,i=window.location.search,n=(n||"").substring(1),i=(i||"").substring(1),new e(n+"&"+i);var n,i}let s=new Map;const a=Object.freeze({set(e,t){return s.set(e,t),this},get:function(e,t){let n=s.get(e);return void 0===n&&t&&(n=t(),s.set(e,n)),n},clear(){s.clear()},delete:e=>s.delete(e),has:e=>s.has(e)});function c(){return"undefined"!=typeof window&&window.document&&window.document.createElement&&!window.isRenderServiceEnv?window._pageTimings||(window._pageTimings={}):a.get("__diagnostics_pageTimings",(()=>({})))}let d,u,l;function m(){return d||(d=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),d}function g(){if(l)return l;const e=document.head.getAttribute("data-info");return l=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),l}let p,h,w;(new Date).getTime();try{h="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{w=e.platformVersion}))}catch(e){}function f(){const e="undefined"!=typeof document&&document.cookie;if(!b&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}const b=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function v(){let e=!1;if(b)try{const t=w;if(t&&parseInt(t.split(".")[0])>=11&&(e=!0),!e&&window&&window.external&&window.external.getHostEnvironmentValue("os-build")){const t=JSON.parse(window.external.getHostEnvironmentValue("os-build"))["os-build"].split(".");(t[0]>10||10===t[0]&&t[1]>0||t[2]>=22e3)&&(e=!0)}}catch(e){}return p=!0===e||null,p}var y;const S=JSON.parse((null===(y=document.head.dataset)||void 0===y?void 0:y.clientSettings)||"{}");let _,E,T=null;function k(e){T=e}function O(e,t){var n,o;const r=f(),s=T||{},a=new URLSearchParams(S.queryparams).get("edgessr");return{name:e,time:t.toISOString(),ver:"4.0",iKey:`o:${null===(n=window.oneDSConfig)||void 0===n?void 0:n.key.split("-")[0]}`,data:Object.assign(Object.assign({},s),{baseType:"MS.News.Web.Base",baseData:{},page:Object.assign(Object.assign({},s.page),{canvas:"Browser",appType:S.apptype,content:Object.assign(Object.assign({},null===(o=s.page)||void 0===o?void 0:o.content),{title:document.title})}),flight:{id:g(),tmpl:`ssrscope:1;${a?`edgessr:${a};`:""}edge.mem:${navigator.deviceMemory+""};edge.concurrency:${navigator.hardwareConcurrency+""};edge.connection:${navigator.connection.effectiveType+""}`},browser:{width:window.outerWidth,height:window.outerHeight,screenSize:[screen.width,screen.height].join("x"),clientId:r,scrollOffset:b&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0,anoncknm:"app_anon",cookieEnabled:navigator.cookieEnabled,isWin11:v(),muid:r},request:{activityId:S.aid,requestId:S.aid,afdMuid:S.fd_muid},timestamp:t.getTime(),sdk:{name:"peregrine-lite-telemetry",ver:"1.0.17",schemaVer:"1.0.16"},build:S.bundleInfo.v,custom:Object.assign(Object.assign({},s.custom),{"rs-cluster-name":i(),"ssr-enabled":1})}),ext:{user:{localId:`t:${r}`}}}}function x(e){try{return decodeURIComponent(e)}catch(e){}}function C(e,t){if(!e)return null;if(t)return function(e){var t;const n=null===(t=document.cookie)||void 0===t?void 0:t.match(`\\b${e}=([^;]*)`);return n?x(n[1]):null}(e);if(!_){const e="undefined"!=typeof document&&document.cookie.split("; ");_={};const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].indexOf("=");_[e[n].slice(0,t).toLocaleLowerCase()]=x(e[n].slice(t+1))}}const n=e.toLocaleLowerCase();return _[n]||null}var P;!function(e){e[e.Alert=0]="Alert",e[e.NoAlert=1]="NoAlert",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(P||(P={}));const I=new class{constructor(e=20){this.maxLength=20,this.list=[],this.maxLength=e}push(e){this.list.push(e),this.list.length>this.maxLength&&this.list.shift()}get data(){return this.list}};function N(e,t,n,i=P.Alert){try{const o=function(){if(!u){const e=document.head.getAttribute("data-client-settings");e&&(u=JSON.parse(e))}return u}(),r=g(),s=function(e){if(e){const{pcsInfo:t,pageGenTime:n}=e,i=new Date(n).getTime(),o=!t||"prod"===t.env;E=o?"browser.events.data.msn.com":"events-sandbox.data.msn.com";return{cors:"true","content-type":"application/x-json-stream","client-id":"NO_AUTH","client-version":"1DS-Web-JS-2.2.2",apikey:o?"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279":"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028","upload-time":i,w:"0",anoncknm:"app_anon"}}return null}(o);let a="";s&&s.apikey&&""!==s.apikey&&(a=function(e){if(e){const t=e.indexOf("-");if(t>0)return e.substring(0,t)}return""}(s.apikey));const c=function(e,t,n,i,o,r,s=P.Alert){var a;if(n){o=o||{};const{apptype:c,audienceMode:d,pagetype:u,pageGenTime:l,bundleInfo:m,deviceFormFactor:g="",fd_muid:p}=n;o.pageGenTime=l,o.build=m&&m.v,o.appType=c;const h=function(e,t,n){const i=n&&"phone"===n.toLowerCase();return{bingHomepage:"binghomepage",mmx:"emmx",edge:"spartan",edgeChromium:t&&"enterprise"===t?"entnews":"anaheim",hybrid:"spartan",hub:i?"prime_mobile":"prime",microsoftNews:"msnews",office:"entnews",views:i?"prime_mobile":"prime",windowsShell:"windowsshell"}[e]}(c,d,g),w=h||c,f=document.getElementsByTagName("html")[0].getAttribute("lang");let b="",v="muid";try{window&&window.getCookieConsentRequired&&"function"==typeof window.getCookieConsentRequired&&window.getCookieConsentRequired()||(b=C("muid"))}catch(e){}b||(b=n.aid,v="aid");const y={name:"MS.News.Web.AppError",time:l,ver:"4.0",iKey:`o:${i}`,data:{baseData:{},baseType:"MS.News.Web.Base",page:{name:"default",product:w,type:R(u),content:{category:"standaloneError"}},browser:{clientId:b,clientIdType:v},flight:{id:r},request:{activityId:n.aid,requestId:n.aid,afdMuid:p},locale:{mkt:f},extSchema:{id:e,severity:s,pb:o,message:t}}};return b&&"muid"===v&&(y.ext=Object.assign(Object.assign({},null==y?void 0:y.ext),{user:Object.assign(Object.assign({},null===(a=null==y?void 0:y.ext)||void 0===a?void 0:a.user),{localId:`t:${b}`})})),o.isSSRScope&&(y.data.flight.tmpl="ssrscope:1"),y?JSON.stringify(y):null}return null}(t,e,o,a,n,r,i);if(s&&c){console.error(c),I.push(c);const e="https://"+E+"/OneCollector/1.0"+function(e){return"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}(s);navigator.sendBeacon(e,c)}}catch(e){}}function R(e){let t=e;switch(e){case"windowsshellhp":t="dhp";break;case"video":t="watch"}return t}const L="data-t";function A(e){try{const t=function(){const e=new URL(window.oneDSConfig.endpoint);return e.searchParams.append("cors","true"),e.searchParams.append("content-type","application/x-json-stream"),e.searchParams.append("client-id","NO_AUTH"),e.searchParams.append("client-version",`peregrine-lite-telemetry-${S.bundleInfo.v}`),e.searchParams.append("apikey",window.oneDSConfig.key),e.searchParams.append("upload-time",Date.now().toString()),e.searchParams.append("w","0"),e.searchParams.append("anoncknm","app_anon"),e.searchParams.append("NoResponseBody","true"),e}();navigator.sendBeacon(t,JSON.stringify(e))}catch(e){N("Error sending Lite Telemetry",34019,{error:e.message})}}function j(e=!1){if(e&&(sessionStorage.getItem("sign-in-active")||sessionStorage.getItem("sign-in-pending")||sessionStorage.getItem("sign-in-refreshed-page")||sessionStorage.getItem("sign-in-refresh-session")))return;window.__peregrine_litePVSent=!0;const t=O("MS.News.Web.PageView",new Date);m().then((()=>{c().TimeToSendPageView=Math.round(performance.now()),A(t)}))}function D(e,t="click"){if(e)try{const n=O("MS.News.Web.PageAction",new Date);n.data.actionType=t,"click"===t&&(n.data.gesture=t);const i=H(e);if(i){if("search_websearch"===i.n)return;n.data.behavior=i.b,n.data.object={name:i.n,type:i.t,content:{id:i["c.i"],type:i["c.t"],headline:i["c.hl"],vertical:i["c.v"],brandId:i["c.bi"],category:i["c.c"]},ext:i.ext,destinationUrl:e.getAttribute("action")||e.href||""};let t=i.n||"",o=e.parentElement;for(;o&&o!==document.body;){const e=H(o);(null==e?void 0:e.n)&&(t=`${e.n}>${t}`),o=o.assignedSlot||o.parentElement||o.parentNode.host}n.data.object.placement={lineage:t}}A(n)}catch(e){N("Error sending Lite Action Telemetry",34019,{error:e.message})}}function q(e){try{const t=function(e){if(!e)return;if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(L)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(L))return t[2];if(t.length>0)return t[0]}}(e),n=t&&function(e){var t;const n=20;for(let i=0;i<n&&e&&!$(e);i++)e=e.assignedSlot||e.parentElement||(null===(t=e.parentNode)||void 0===t?void 0:t.host);if(!$(e))return;return e}(t);D(n)}catch(e){N("Error sending Click Event Telemetry",34019,{error:e.message})}}function $(e){if(!e)return!1;if("BUTTON"===e.nodeName||e.hasAttribute("href")||e.getAttribute&&"button"===e.getAttribute("role")||e.form)return!0;const t=H(e);return t&&(5===t.t||11===t.t||t.b&&e.tagName.includes("-"))}function H(e){try{const t=e.getAttribute(L);return t&&JSON.parse(t)}catch(e){N("Error parsing telemetry attribute",34019,{error:e.message})}}class M{constructor(){this._published=[],this._subscribers=[]}publish(e){this._published.push(e),this._subscribers.forEach((t=>t(e)))}subscribe(e){this._subscribers.push(e),this._published.forEach((t=>e(t)))}bulkPublish(e){e.forEach((e=>this.publish(e)))}}(()=>{if(!window.isSSREnabled)return;const e=r(S),t="true"===o(n,e);t&&(window.SSRONLY=t),history.scrollRestoration="manual",window.setLiteTelemetryContract=k,window.sendLitePV=j,window.ssrLoadedExperience=new M,window.ssrLoadedBundles=new M,m().then((()=>{const e=()=>{var e,t;const n=[];let i=null===(e=document.body)||void 0===e?void 0:e.childNodes;for(;i&&i.length;){const e=i.length-1,o=i[e];n.push(`[index:${e};length:${o.textContent.length}]${o.nodeName}`),i=o.childNodes||(null===(t=o.shadowRoot)||void 0===t?void 0:t.childNodes)}return n.join(">")};let t=e();const n=setInterval((()=>{if("loading"!==document.readyState)return void clearInterval(n);const i=e();i!==t||t.endsWith("SCRIPT")?t=i:(N("Page is possibly stuck at loading state",34015,{lastElements:i}),clearInterval(n))}),5e3)})),window.standbyClickEventsHandler||(window.standbyClickEventsHandler=function(e){q(e)},window.addEventListener("click",window.standbyClickEventsHandler)),window.addEventListener("beforeunload",(()=>{window.isSSRCompleted||window.isCSRFallback||N("SSR streaming not complete during page unload",34017,{eventTimeStamp:(new Date).toISOString(),markerTime:Math.round(performance.now()),hasSSRData:!!window.ntpSSRData})})),window.searchFormSubmitListener=e=>{D(e.target,"submit")},window.addEventListener("TTSR.SearchBox",(()=>{try{const e=document.querySelector("edge-chromium-page").shadowRoot.querySelector("cs-header-core").shadowRoot.querySelector("common-search-box-edgenext").shadowRoot.querySelector("cs-common-search-box").shadowRoot.querySelector("form");if(!e)throw"Search box form element not found";e.addEventListener("submit",window.searchFormSubmitListener)}catch(e){N("Exception occurred while adding search box form submit event listener",34018,{error:e.message})}})),window.isResized=!1,window.addEventListener("resize",(()=>window.isResized=!0),{once:!0})})()}();
